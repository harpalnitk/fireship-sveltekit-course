import{_ as ne,R as ae,k as oe,l as se,m as re,e as le}from"../chunks/firebase.c2bbda79.js";import{H as ie}from"../chunks/control.f5b05b5f.js";import{s as ce,H as ue,g as P,c as S,l as O,B as de,h as R,d as T,i as q,m as A,k as L,D as V,I as me}from"../chunks/scheduler.c6bb22b0.js";import{S as he,i as fe,d as F,q as W,v as _e,e as b,g as _,n as g,a as C,s as X,b as B,c as pe,t as D,j as ge,k as ve,m as be,l as we,h as ke}from"../chunks/index.c83e402d.js";import{U as ee,g as Ee,a as ye}from"../chunks/UserLink.45ba8977.js";function Y(n,e){if(isNaN(n)||n<400||n>599)throw new Error(`HTTP error status codes must be between 400 and 599 â€” ${n} is invalid`);return new ie(n,e)}new TextEncoder;const Pe=async({params:n})=>{var c,i;const e=ne(le,"users"),o=ae(e,se("username","==",n.username),oe(1)),d=await re(o),p=(c=d.docs[0])==null?void 0:c.exists(),t=(i=d.docs[0])==null?void 0:i.data();if(!p)throw Y(404,"that user does not exist!");if(!t.published)throw Y(403,`The profile of @${t.username} is not public!`);return{username:t.username,photoURL:t.photoURL,bio:t.bio,links:t.links??[]}},Te=Object.freeze(Object.defineProperty({__proto__:null,load:Pe},Symbol.toStringTag,{value:"Module"})),j="src/routes/[username]/+page.svelte";function Z(n,e,o){const d=n.slice();return d[1]=e[o],d}function z(n){let e,o,d,p;const t=[n[1]];let c={};for(let u=0;u<t.length;u+=1)c=ue(c,t[u]);o=new ee({props:c,$$inline:!0});const i={c:function(){e=P("li"),ge(o.$$.fragment),d=S(),this.h()},l:function(m){e=R(m,"LI",{class:!0});var v=q(e);ve(o.$$.fragment,v),d=T(v),v.forEach(b),this.h()},h:function(){_(e,"class","my-2"),L(e,j,31,2,639)},m:function(m,v){C(m,e,v),be(o,e,null),g(e,d),p=!0},p:function(m,v){const f=v&1?Ee(t,[ye(m[1])]):{};o.$set(f)},i:function(m){p||(B(o.$$.fragment,m),p=!0)},o:function(m){D(o.$$.fragment,m),p=!1},d:function(m){m&&b(e),we(o)}};return F("SvelteRegisterBlock",{block:i,id:z.name,type:"each",source:"(28:2) {#each data.links as item}",ctx:n}),i}function G(n){let e,o,d,p,t,c,i,u=n[0].username+"",m,v,f,H,I,E,x=(n[0].bio??"no bio yet...")+"",$,M,k,w;document.title=e="@"+n[0].username+" Links";let y=W(n[0].links),s=[];for(let h=0;h<y.length;h+=1)s[h]=z(Z(n,y,h));const te=h=>D(s[h],1,1,()=>{s[h]=null}),J={c:function(){o=P("meta"),p=S(),t=P("main"),c=P("h1"),i=O("@"),m=O(u),v=S(),f=P("img"),I=S(),E=P("p"),$=O(x),M=S(),k=P("ul");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l:function(r){const l=de("svelte-13q5o6r",document.head);o=R(l,"META",{name:!0,content:!0}),l.forEach(b),p=T(r),t=R(r,"MAIN",{class:!0});var a=q(t);c=R(a,"H1",{class:!0});var U=q(c);i=A(U,"@"),m=A(U,u),U.forEach(b),v=T(a),f=R(a,"IMG",{src:!0,alt:!0,width:!0,class:!0}),I=T(a),E=R(a,"P",{class:!0});var K=q(E);$=A(K,x),K.forEach(b),M=T(a),k=R(a,"UL",{class:!0});var Q=q(k);for(let N=0;N<s.length;N+=1)s[N].l(Q);Q.forEach(b),a.forEach(b),this.h()},h:function(){_(o,"name","description"),_(o,"content",d=n[0].bio),L(o,j,11,3,211),_(c,"class","text-7xl text-purple-500"),L(c,j,17,3,337),V(f.src,H=n[0].photoURL??"/user.png")||_(f,"src",H),_(f,"alt","photoURL"),_(f,"width","256"),_(f,"class","mx-auto"),L(f,j,21,3,412),_(E,"class","text-xl my-8"),L(E,j,28,3,521),_(k,"class","list-none"),L(k,j,29,3,583),_(t,"class","prose text-center mx-auto mt-8"),L(t,j,15,1,283)},m:function(r,l){g(document.head,o),C(r,p,l),C(r,t,l),g(t,c),g(c,i),g(c,m),g(t,v),g(t,f),g(t,I),g(t,E),g(E,$),g(t,M),g(t,k);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(k,null);w=!0},p:function(r,[l]){if((!w||l&1)&&e!==(e="@"+r[0].username+" Links")&&(document.title=e),(!w||l&1&&d!==(d=r[0].bio))&&_(o,"content",d),(!w||l&1)&&u!==(u=r[0].username+"")&&X(m,u),(!w||l&1&&!V(f.src,H=r[0].photoURL??"/user.png"))&&_(f,"src",H),(!w||l&1)&&x!==(x=(r[0].bio??"no bio yet...")+"")&&X($,x),l&1){y=W(r[0].links);let a;for(a=0;a<y.length;a+=1){const U=Z(r,y,a);s[a]?(s[a].p(U,l),B(s[a],1)):(s[a]=z(U),s[a].c(),B(s[a],1),s[a].m(k,null))}for(ke(),a=y.length;a<s.length;a+=1)te(a);pe()}},i:function(r){if(!w){for(let l=0;l<y.length;l+=1)B(s[l]);w=!0}},o:function(r){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)D(s[l]);w=!1},d:function(r){r&&(b(p),b(t)),b(o),me(s,r)}};return F("SvelteRegisterBlock",{block:J,id:G.name,type:"component",source:"",ctx:n}),J}function Re(n,e,o){let{$$slots:d={},$$scope:p}=e;_e("Page",d,[]);let{data:t}=e;n.$$.on_mount.push(function(){t===void 0&&!("data"in e||n.$$.bound[n.$$.props.data])&&console.warn("<Page> was created without expected prop 'data'")});const c=["data"];return Object.keys(e).forEach(i=>{!~c.indexOf(i)&&i.slice(0,2)!=="$$"&&i!=="slot"&&console.warn(`<Page> was created with unknown prop '${i}'`)}),n.$$set=i=>{"data"in i&&o(0,t=i.data)},n.$capture_state=()=>({UserLink:ee,data:t}),n.$inject_state=i=>{"data"in i&&o(0,t=i.data)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[t]}class qe extends he{constructor(e){super(e),fe(this,e,Re,G,ce,{data:0}),F("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:G.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{qe as component,Te as universal};
